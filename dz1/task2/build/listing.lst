     1                                  global _start
     2                                  
     3                                  section .data
     4 00000000 726573756C742E7478-         filename db "result.txt", 0                 ; имя файла с нулевым байтом
     4 00000009 7400               
     5 0000000B 48656C6C6F2120486F-         message db "Hello! How are you?", 10        ; строка для записи
     5 00000014 772061726520796F75-
     5 0000001D 3F0A               
     6                                      length equ $ - message                      ; длина строки
     7                                  
     8                                  section .text
     9                                  _start:
    10 00000000 B802000000                  mov rax, 2                              ; 2 - sys_open
    11 00000005 48BF-                       mov rdi, filename                       ; имя файла
    11 00000007 [0000000000000000] 
    12 0000000F BE41010000                  mov rsi, 0o1 | 0o100 | 0o400            ; флаги: O_WRONLY (Только запись)
    13                                                                              ; | O_CREAT (Создать файл, если нет) 
    14                                                                              ; | O_TRUNC (Удалить столько байт, сколько в строке для записи)
    15 00000014 BA80010000                  mov rdx, 0o600                          ; права: rw-r--r--
    16 00000019 0F05                        syscall
    17                                      
    18 0000001B 4883F800                    cmp rax, 0                              ; сравнение с 0
    19 0000001F 7C38                        jl open_failed                          ; если дескриптор отрицательный - ошибка
    20                                      
    21 00000021 4989C0                      mov r8, rax                             ; сохраняем fd в r8
    22                                      
    23 00000024 B801000000                  mov rax, 1                              ; 1 - sys_write
    24 00000029 4C89C7                      mov rdi, r8                             ; файловый дескриптор
    25 0000002C 48BE-                       mov rsi, message                        ; буфер для записи
    25 0000002E [0B00000000000000] 
    26 00000036 BA14000000                  mov rdx, length                         ; количество байтов
    27 0000003B 0F05                        syscall
    28                                      
    29 0000003D 4883F800                    cmp rax, 0
    30 00000041 7C22                        jl write_failed
    31                                      
    32 00000043 B803000000                  mov rax, 3                              ; 3 - sys_close
    33 00000048 4C89C7                      mov rdi, r8                             ; файловый дескриптор
    34 0000004B 0F05                        syscall
    35                                      
    36 0000004D B83C000000                  mov rax, 60                             ; sys_exit
    37 00000052 BF00000000                  mov rdi, 0                              ; код возврата 0 - всё норм
    38 00000057 0F05                        syscall
    39                                  
    40                                  open_failed:
    41 00000059 B83C000000                  mov rax, 60
    42 0000005E BF01000000                  mov rdi, 1                              ; код ошибки для open
    43 00000063 0F05                        syscall
    44                                  
    45                                  write_failed:
    46 00000065 B83C000000                  mov rax, 60
    47 0000006A BF02000000                  mov rdi, 2                              ; код ошибки для write
    48 0000006F 0F05                        syscall
